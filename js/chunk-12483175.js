(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12483175"],{"2c95":function(t,e,s){},"4ac2":function(t,e,s){"use strict";var a=s("2c95"),i=s.n(a);i.a},"569c":function(t,e,s){"use strict";var a=s("a32c"),i=s.n(a);i.a},6360:function(t,e,s){},"83ed":function(t,e,s){t.exports=s.p+"img/address.png"},"95bd":function(t,e,s){"use strict";var a=s("6360"),i=s.n(a);i.a},"96f9":function(t,e,s){},"9f97":function(t,e,s){"use strict";var a=s("96f9"),i=s.n(a);i.a},a32c:function(t,e,s){},a5b3:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isWeixinState?t._e():a("homeHeader"),a("div",{staticStyle:{position:"relative"}},[a("videoShow",{attrs:{sources_src:t.videoUrl,poster:t.videoImg}}),a("p",{staticClass:"video-des"},[t._v(t._s(t.title))]),t.currentDatas?a("div",{staticClass:"address-content"},[a("div",[a("img",{staticClass:"address",attrs:{src:s("83ed")}}),a("p",[t._v(t._s(t.currentDatas.city))])])]):t._e()],1),a("listWrapper",{attrs:{id:t.id,latitude:t.currentDatas.latitude,longitude:t.currentDatas.longitude}})],1)},i=[],n=(s("c975"),s("6141")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},t._l(t.shop,(function(t){return s("div",{key:t.id,staticClass:"content"},[s("listItem",{attrs:{shop:t}})],1)})),0)},o=[],c=(s("99af"),s("4de4"),s("4160"),s("159b"),s("2909")),u=(s("96cf"),s("1da1")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"header"},[a("div",{staticClass:"item-left"},[a("img",{staticClass:"logo",attrs:{src:t.shopData.logoUrl,alt:""}}),a("p",[t._v(t._s(t.shopData.name))])]),a("div",{staticClass:"item-right"},[a("img",{staticClass:"address",attrs:{src:s("83ed")}}),a("p",{staticClass:"meter"},[t._v(t._s(t.shopData.distance))]),a("p",[t._v(t._s(t.shopData.addressShort))])])]),a("div",{staticClass:"content"},[a("img",{attrs:{src:t.shopData.video.cover}}),a("div",{staticClass:"content-des"},[a("p",{staticClass:"title"},[t._v(t._s(t.shopData.product.name))]),a("p",{staticClass:"des"},[t._v(t._s(t.shopData.product.intro))]),a("p",{staticClass:"price"},[t._v("￥"+t._s(t.shopData.product.price)+"+￥"+t._s(t.shopData.product.point)+"红包")]),t.shopData.product.stock>0?a("p",{staticClass:"discount"},[t._v("最后"+t._s(t.shopData.product.stock)+"件")]):a("p",{staticClass:"discount"},[t._v("已抢完")]),a("div",{staticClass:"redBag"},[t._v(t._s(t.shopData.product.point)+"红包")]),a("img",{attrs:{src:s("fe73"),alt:""}})])])])},d=[],p={name:"list-item",props:{shop:{type:Object,default:function(){return{}}}},computed:{shopData:{get:function(){return this.shop}}},data:function(){return{}},mounted:function(){}},f=p,m=(s("4ac2"),s("2877")),v=Object(m["a"])(f,l,d,!1,null,"c5de675e",null),h=v.exports,g={name:"list-wrapper",components:{listItem:h},props:{id:{type:String,default:function(){return""}},latitude:{type:String,default:function(){return""}},longitude:{type:String,default:function(){return""}}},data:function(){return{shop:[],page:0,limit:10}},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,s=document.documentElement.scrollHeight||document.body.scrollHeight;t+e>=s-100&&this.getVideoDatasByPage(this.page)},getVideoDatasByPage:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,e.$api.WMC.getShopsDatas({offset:t,limit:e.limit,term_id:e.id,latitude:e.latitude,longitude:e.longitude});case 3:if(a=s.sent,0!==a.data.code){s.next=12;break}return i=[].concat(Object(c["a"])(e.shop),Object(c["a"])(a.data.data)),i=i.filter((function(t,e){var s=[];return i.forEach((function(t){s.push(t.id)})),s.indexOf(t.id)===e})),e.shop=i,e.page+=e.limit,s.abrupt("return",!0);case 12:return s.abrupt("return",!1);case 13:s.next=18;break;case 15:s.prev=15,s.t0=s["catch"](0),e.$Message.error({content:s.t0,duration:4,closable:!0});case 18:case"end":return s.stop()}}),s,null,[[0,15]])})))()}},mounted:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.addEventListener("scroll",t.handleScroll),t.getVideoDatasByPage(0);case 2:case"end":return e.stop()}}),e)})))()}},_=g,y=(s("9f97"),Object(m["a"])(_,r,o,!1,null,"57ee707c",null)),D=y.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input_video"},[s("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:t.playerOptions}})],1)},C=[],w={name:"BusImg",props:{sources_src:{type:String,default:function(){return""}},poster:{type:String,default:function(){return""}}},data:function(){return{playerOptions:{playbackRates:[.5,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:this.sources_src}],poster:this.poster,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}}},S=w,x=(s("569c"),Object(m["a"])(S,b,C,!1,null,null,null)),O=x.exports,k={name:"list",components:{homeHeader:n["a"],listWrapper:D,videoShow:O},data:function(){return{video:"",title:"",id:"",currentDatas:{},location:null,isWeixinState:!1}},methods:{webVAl:function(){var t=navigator.userAgent.toLowerCase();this.isWeixinState=-1!=t.indexOf("micromessenger"),console.log(this.isWeixinState)}},mounted:function(){this.webVAl()},created:function(){var t=this.$route.query,e=t.videoData,s=t.id,a=t.title;e=JSON.parse(e),sessionStorage.getItem("currentPositioning")&&(this.currentDatas=JSON.parse(sessionStorage.getItem("currentPositioning")).currentPositioning),this.videoUrl=e.url,this.videoImg=e.cover,this.title=a,this.id=s}},j=k,E=(s("95bd"),Object(m["a"])(j,a,i,!1,null,null,null));e["default"]=E.exports},fe73:function(t,e,s){t.exports=s.p+"img/redBag.png"}}]);