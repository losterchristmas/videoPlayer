(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f916564"],{"569c":function(t,e,s){"use strict";var a=s("a32c"),i=s.n(a);i.a},6360:function(t,e,s){},"725d":function(t,e,s){},"83ed":function(t,e,s){t.exports=s.p+"img/address.png"},"95bd":function(t,e,s){"use strict";var a=s("6360"),i=s.n(a);i.a},a32c:function(t,e,s){},a5b3:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isWeixinState?t._e():a("homeHeader"),a("div",{staticStyle:{position:"relative"}},[a("videoShow",{attrs:{sources_src:t.videoUrl,poster:t.videoImg}}),a("p",{staticClass:"video-des"},[t._v(t._s(t.title))]),t.currentDatas?a("div",{staticClass:"address-content"},[a("div",[a("img",{staticClass:"address",attrs:{src:s("83ed")}}),a("p",[t._v(t._s(t.currentDatas.city))])])]):t._e()],1),a("listWrapper",{attrs:{id:t.id,latitude:t.currentDatas.latitude,longitude:t.currentDatas.longitude},on:{video:t.changeVideo}})],1)},i=[],n=(s("c975"),s("b0c0"),s("6141")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},t._l(t.shop,(function(t){return s("div",{key:t.id,staticClass:"content"},[s("listItem",{attrs:{shop:t}})],1)})),0)},o=[],c=(s("99af"),s("4de4"),s("4160"),s("d3b7"),s("25f0"),s("159b"),s("2909")),u=(s("96cf"),s("1da1")),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"header"},[a("div",{staticClass:"item-left"},[a("img",{staticClass:"logo",attrs:{src:t.shopData.logoUrl,alt:""}}),a("p",[t._v(t._s(t.shopData.name))])]),a("div",{staticClass:"item-right"},[a("img",{staticClass:"address",attrs:{src:s("83ed")}}),a("p",{staticClass:"meter"},[t._v(t._s(t.shopData.distance))]),a("p",[t._v(t._s(t.shopData.addressShort))])])]),a("div",{staticClass:"content"},[a("div",{staticClass:"imgContent",on:{click:function(e){return t.enterListPage(t.shopId,t.ShopVideoData)}}},[a("img",{staticClass:"munt",attrs:{src:s("21fd")}}),a("img",{attrs:{src:t.shopData.video.cover}})]),a("div",{staticClass:"content-des"},[a("p",{staticClass:"title"},[t._v(t._s(t.shopData.product.name))]),a("p",{staticClass:"des"},[t._v(t._s(t.shopData.product.intro))]),a("p",{staticClass:"price"},[t._v("￥"+t._s(t.shopData.product.price)+"+￥"+t._s(t.shopData.product.point)+"红包")]),t.shopData.product.stock>0?a("p",{staticClass:"discount"},[t._v("最后"+t._s(t.shopData.product.stock)+"件")]):a("p",{staticClass:"discount"},[t._v("已抢完")]),a("div",{staticClass:"redBag"},[t._v(t._s(t.shopData.product.point)+"红包")]),a("img",{attrs:{src:s("fe73"),alt:""}})])])])},l=[],p=(s("ac1f"),s("5319"),{name:"list-item",props:{shop:{type:Object,default:function(){return{}}}},computed:{shopData:{get:function(){return this.shop}},shopId:function(){return this.shop.id},ShopVideoData:function(){return this.shop.video}},data:function(){return{}},methods:{enterListPage:function(t,e){this.$router.replace({name:"list",query:{id:t,videoData:JSON.stringify(e),name:this.shopData.name,title:e.title}})}},mounted:function(){}}),h=p,g=(s("b086"),s("2877")),m=Object(g["a"])(h,d,l,!1,null,"4771b3df",null),f=m.exports,v={name:"list-wrapper",components:{listItem:f},props:{id:{type:String,default:function(){return""}},latitude:{type:String,default:function(){return""}},longitude:{type:String,default:function(){return""}}},data:function(){return{shop:[],page:0,limit:10}},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,s=document.documentElement.scrollHeight||document.body.scrollHeight;t+e>=s-100&&this.getVideoDatasByPage(this.page)},getVideoDatasByPage:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,sessionStorage.shopListID=e.id,s.next=4,e.$api.WMC.getShopsDatas({offset:t,limit:e.limit,term_id:e.id,latitude:e.latitude,longitude:e.longitude});case 4:if(a=s.sent,0!==a.data.code){s.next=15;break}return i=[].concat(Object(c["a"])(e.shop),Object(c["a"])(a.data.data)),i=i.filter((function(t,e){var s=[];return i.forEach((function(t){s.push(t.id)})),s.indexOf(t.id)===e})),e.shop=i,e.page=parseInt(t)+parseInt(e.limit),sessionStorage.resShopDatas=JSON.stringify(e.shop),sessionStorage.resShopPage=JSON.stringify(e.page),s.abrupt("return",!0);case 15:return s.abrupt("return",!1);case 16:s.next=21;break;case 18:s.prev=18,s.t0=s["catch"](0),e.$Message.error({content:s.t0,duration:4,closable:!0});case 21:case"end":return s.stop()}}),s,null,[[0,18]])})))()},pageInit:function(){this.shop=[],this.page=0,this.limit=10}},watch:{$route:function(t,e){if(t.query.id.toString()!=e.query.id.toString()){this.pageInit(),this.id=t.query.id;var s={videoData:JSON.parse(t.query.videoData),name:t.query.name};this.$emit("video",s),this.getVideoDatasByPage(this.page)}}},mounted:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.addEventListener("scroll",t.handleScroll),s=JSON.parse(sessionStorage.getItem("isAddressState")),!s&&sessionStorage.getItem("resShopDatas")?(console.log(JSON.parse(sessionStorage.getItem("resShopDatas"))),t.shop=JSON.parse(sessionStorage.getItem("resShopDatas"))):t.getVideoDatasByPage(0);case 3:case"end":return e.stop()}}),e)})))()},created:function(){}},S=v,D=(s("c8da"),Object(g["a"])(S,r,o,!1,null,"250b7485",null)),y=D.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input_video"},[s("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:t.playerOptions}})],1)},b=[],C={name:"BusImg",props:{sources_src:{type:String,default:function(){return""}},poster:{type:String,default:function(){return""}}},data:function(){return{playerOptions:{playbackRates:[.5,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:this.sources_src}],poster:this.poster,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}}},w=C,O=(s("569c"),Object(g["a"])(w,_,b,!1,null,null,null)),I=O.exports,x={name:"list",components:{homeHeader:n["a"],listWrapper:y,videoShow:I},data:function(){return{video:"",title:"",id:"",currentDatas:{},location:null,isWeixinState:!1}},methods:{webVAl:function(){var t=navigator.userAgent.toLowerCase();this.isWeixinState=-1!=t.indexOf("micromessenger")},changeVideo:function(t){this.title=t.name,this.videoUrl=t.videoData.url,this.videoImg=t.videoData.cover}},created:function(){this.webVAl();var t=this.$route.query,e=t.videoData,s=t.id,a=t.title;e=JSON.parse(e),sessionStorage.getItem("currentPositioning")&&(this.currentDatas=JSON.parse(sessionStorage.getItem("currentPositioning")).currentPositioning),this.videoUrl=e.url,this.videoImg=e.cover,this.title=a,this.id=s}},k=x,J=(s("95bd"),Object(g["a"])(k,a,i,!1,null,null,null));e["default"]=J.exports},b086:function(t,e,s){"use strict";var a=s("725d"),i=s.n(a);i.a},c8da:function(t,e,s){"use strict";var a=s("ee5b"),i=s.n(a);i.a},ee5b:function(t,e,s){},fe73:function(t,e,s){t.exports=s.p+"img/redBag.png"}}]);